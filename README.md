# Datarize Frontend 과제 전형

## 📋 요구사항 충족 확인

### 1. 가격대별 구매 빈도 차트

- **바 차트 시각화**: Recharts 라이브러리를 활용한 가로형 바 차트 구현
- **가격대 구분**: 2만원 이하 ~ 10만원 이상까지 만원 단위로 구분
- **날짜 필터링**: 시작 날짜와 종료 날짜 선택 기능 제공
- **단일 날짜 조회**: 시작일과 종료일을 동일하게 설정하여 단일 날짜 조회 지원
- **데이터 없음 처리**: 해당 기간에 구매 내역이 없을 경우 안내 메시지 표시

### 2. 가장 많이 구매한 고객 목록 및 검색 기능

- **고객 정보 표시**: ID, 이름, 총 구매 횟수, 총 구매 금액을 테이블 형태로 표시
- **정렬 기능**: ID(기본값), 구매 금액 오름차순(asc), 구매 금액 내림차순(desc) 정렬 지원
- **이름 검색**: 디바운싱(500ms)을 적용한 실시간 검색 기능
- **검색 결과 없음 처리**: 검색 결과가 없을 경우 안내 메시지 표시

### 3. 고객 ID 기반 상세 기능

- **모달 UI**: 고객 Row 클릭 시 모달로 상세 구매 내역 표시
- **상세 정보**: 구매 날짜, 제품명, 가격, 상품 썸네일 이미지 포함
- **구매 요약**: 총 구매 횟수 및 총 구매 금액 하단에 표시

### 4. 세부 구현 사항

- **API 통합**: 모든 데이터를 서버 API로부터 비동기 요청으로 가져옴
- **로딩 상태**: Suspense와 LoadingSpinner를 활용한 로딩 상태 처리
- **에러 처리**: ErrorBoundary와 QueryErrorBoundary를 통한 에러 핸들링
- **토스트 알림**: 날짜 검증 실패 시 사용자 친화적인 경고 메시지 표시

### 5. 추가 요구 사항

- **코드 주석**: 주요 로직과 컴포넌트에 설명 주석 추가
- **유닛 테스트**: Vitest를 활용한 4개의 테스트 파일 작성
  - `mapToReChartsData.test.ts`: 차트 데이터 변환 로직 테스트
  - `validateDateRange.test.ts`: 날짜 유효성 검증 로직 테스트
  - `formatPrice.test.ts`: 가격 포맷팅 유틸리티 테스트
  - `formatStringToDate.test.ts`: 날짜 변환 유틸리티 테스트

---

## 🎯 구현 시 특별히 신경 쓴 부분

### 1. **사용자 경험(UX) 최적화**

#### 디바운싱을 통한 검색 최적화

고객 이름 검색 시 매 입력마다 API를 호출하면 불필요한 네트워크 요청이 발생하고 서버에 부하를 줄 수 있습니다. 이를 방지하기 위해 커스텀 훅 `useDebounce`를 구현하여 500ms의 디바운싱을 적용했습니다.

```typescript
const debouncedQuery = useDebounce(inputValue, 500);
```

사용자가 입력을 멈춘 후 500ms가 지나면 검색이 실행되어, 타이핑 중에는 API 요청이 발생하지 않습니다.

#### 날짜 검증 및 피드백

날짜 필터링 시 다음과 같은 유효성 검증을 수행합니다:

- 시작 날짜와 종료 날짜가 모두 입력되었는지 확인
- 시작 날짜가 종료 날짜보다 늦지 않은지 확인
- 검증 실패 시 토스트 메시지로 사용자에게 명확한 피드백 제공

```typescript
const validation = validateDateRange(fromDate, toDate);
if (!validation.valid) {
  showToast({ mode: 'WARN', message: validation.error! });
  return;
}
```

### 2. **Recharts 선택 이유**

#### 왜 Recharts를 선택했는가?

여러 차트 라이브러리 중 Recharts를 선택한 이유는 다음과 같습니다:

**React 친화적인 API**

- React 컴포넌트 기반으로 설계되어 JSX 문법으로 직관적으로 사용 가능
- Props를 통한 설정으로 React의 데이터 흐름에 자연스럽게 통합

**반응형 디자인 지원**

- `ResponsiveContainer`를 통해 화면 크기에 따라 자동으로 차트 크기 조정
- 모바일, 태블릿, 데스크톱 모든 환경에서 최적의 사용자 경험 제공

**커스터마이징 용이성**

- 테마 컬러와 스타일을 쉽게 적용할 수 있음
- `LabelList`를 활용하여 바 차트 내부에 구매 건수 표시
- `background`, `radius` 등의 Props로 세밀한 디자인 조정 가능

**적절한 번들 크기**

- Chart.js, D3.js 등에 비해 가벼운 라이브러리
- 본 과제의 요구사항(바 차트)에 충분한 기능 제공

### 3. **코드 구조 및 아키텍처**

#### 도메인 기반 폴더 구조

```
src/
  domain/
    Customer/       # 고객 관련 기능
      components/
      hooks/
    Purchase/       # 구매 관련 기능
      components/
      hooks/
      utils/
  shared/           # 공통 컴포넌트 및 유틸리티
    components/
    hooks/
    utils/
```

- 코드의 응집도(Cohesion) 향상
- 기능별 유지보수 용이성 증대

비즈니스 로직을 도메인별로 분리하여 관심사의 분리를 실현했습니다.

### 4. **React Query를 활용한 서버 상태 관리**

#### useSuspenseQuery 활용

데이터 페칭에 `useSuspenseQuery`를 사용하여

- 로딩 상태를 Suspense 경계에서 선언적으로 처리
- 에러 상태를 ErrorBoundary에서 일관되게 처리
- 컴포넌트 코드를 성공 케이스에만 집중하도록 단순화

```tsx
<QueryErrorBoundary>
  <Suspense fallback={<LoadingSpinner />}>
    <PurchaseFrequencyBarChart queryParams={queryParams} />
  </Suspense>
</QueryErrorBoundary>
```

### 5. **유틸리티 함수와 유닛 테스트**

#### 순수 함수로 추출

비즈니스 로직을 순수 함수로 추출하여 테스트 가능성을 높였습니다:

- `mapToReChartsData`: 가격대 문자열을 차트 데이터로 변환
- `validateDateRange`: 날짜 범위 유효성 검증
- `formatPrice`: 숫자를 한국 원화 형식으로 포맷
- `formatStringToDate`: 문자열을 Date 객체로 변환

#### Vitest를 활용한 테스트

각 유틸리티 함수에 대한 유닛 테스트를 작성하여 코드의 신뢰성을 확보했습니다:

## 🛠 기술 스택

### Core

- **React 18.3.1**: 최신 버전의 React 사용
- **TypeScript 5.2.2**: 타입 안정성 확보
- **Vite 5.3.4**: 빠른 개발 서버 및 빌드

### 상태 관리 및 데이터 페칭

- **@tanstack/react-query 5.90.12**: 서버 상태 관리 및 캐싱
- **Axios 1.13.2**: HTTP 클라이언트

### 스타일링

- **@emotion/react & @emotion/styled 11.14.x**: CSS-in-JS
- 커스텀 테마 시스템

### 차트

- **Recharts 3.6.0**: React 친화적인 차트 라이브러리

### 테스트

- **Vitest 4.0.16**: 빠르고 현대적인 테스트 프레임워크

---

## 🚀 프로젝트 실행 방법

### 사전 요구사항

- Node.js 20.13.1
- Yarn 1.22.22

### 설치 및 실행

```bash
# 프로젝트 루트의 apps 폴더로 이동
cd apps

# 의존성 설치
yarn install

# 백엔드 서버 실행 (터미널 1)
yarn start-server

# 프론트엔드 클라이언트 실행 (터미널 2)
yarn start-client
```

### 테스트 실행

```bash
cd apps/frontend
yarn test
```

---

## 📝 마무리

본 과제를 통해 다음과 같은 목표를 달성했습니다:

1. **모든 필수 요구사항 충족**: 가격대별 차트, 고객 목록 및 검색, 고객 상세 기능 완벽 구현
2. **사용자 경험 최적화**: 디바운싱, 유효성 검증, 빈 데이터 처리 등 세심한 UX 고려
3. **유지보수 가능한 코드**: 도메인 기반 구조, 커스텀 훅, 타입 안정성 확보
4. **테스트 가능한 코드**: 순수 함수 추출 및 유닛 테스트 작성
5. **성능 최적화**: 메모이제이션, React Query 캐싱 활용

특히 Recharts를 선택하여 React 생태계에 자연스럽게 통합되는 선언적이고 직관적인 차트를 구현할 수 있었으며, React Query와 Suspense/ErrorBoundary를 조합하여 현대적인 React 개발 패턴을 적용했습니다.

감사합니다. 🙏

---

### TODO List

- 가격대별 구매 빈도 차트

  - [x] 가격대별 차트 만들기 (2만원 이하 ~ 10만원 이상 만원 단위)
  - [x] 데이터 페칭하여 차트에 반영하기
  - [x] 날짜 선택 기능 구현
  - [x] 특정 기간 조회 기능 구현
  - [x] 로딩 및 에러 처리 구현

- 가장 많이 구매한 고객 목록 및 검색 기능

  - [x] 고객 목록 UI 구현(ID, 이름, 총 구매 횟수, 총 구매 금액)
  - [x] 데이터 페칭하여 목록에 반영하기
  - [x] 내림차순/오름차순 정렬 기능 구현
  - [x] 이름 검색 기능 구현
  - [x] 로딩 및 에러 처리 구현

- 고객 ID 기반 상세 기능

  - [x] 고객 상세 구매 내역 UI 구현(구매 날짜, 제품 목록, 가격, 썸네일)
  - [x] 데이터 페칭하여 상세 내역에 반영하기
  - [x] 로딩 및 에러 처리 구현

---

안녕하세요, 지원자님. Datarize Frontend Developer 서류 전형에 합격하신 것을 축하드립니다.  
본 과제는 수신 후 24시간 동안 풀어주시면 됩니다.

## 정책서

쇼핑몰 구매 데이터 대시보드 애플리케이션

### 과제 개요

지원자님은 쇼핑몰의 구매 데이터를 시각화하고 분석할 수 있는 간단한 대시보드 애플리케이션을 개발하게 됩니다.  
이 애플리케이션은 `7월 한 달` 동안 발생한 구매 데이터를 기반으로 몇 가지 주요 정보를 제공해야 합니다.

**해당 프로젝트는 `node 20.13.1`, `yarn 1.22.22` 버전으로 세팅되었습니다**

**`apps/backend` 폴더 내의 코드는 임의로 수정하지 마세요**  
**문의 사항은 채널로 주시면 답변 드리겠습니다**

**제출 시에는 fork된 본인의 레포지토리 링크를 첨부하여 메일로 회신 주시면 확인하겠습니다 :) (원본 저장소에 PR 금지)**
**README 파일에 프로젝트 설정 및 실행 방법을 포함하세요.**

```cmd
cd apps
yarn install
yarn start-server
yarn start-client
```

### 요구 사항

- 가격대별 구매 빈도 차트

  - 한 달 동안 발생한 구매 데이터를 바탕으로, 각 가격대의 제품이 얼마나 많이 구매되었는지 보여주는 차트를 구현하세요. 가격대는 2만원 이하부터 10만원 이상까지 만원 단위로 구분됩니다. 차트는 바 차트 형태로 시각화되어야 합니다. 날짜를 선택해서 특정 기간을 조회할 수 있도록 구현해주세요.

- 가장 많이 구매한 고객 목록 및 검색 기능

  - 한 달 동안 가장 많이 구매한 고객을 내림차순/오름차순으로 정렬하여 보여주는 목록을 구현하세요. 기본 정렬은 ID입니다. 각 고객의 ID, 이름, 총 구매 횟수, 총 구매 금액을 표시하세요. 고객의 이름을 통해서 검색 가능해야 합니다.

- 고객 ID 기반 상세 기능

  - 특정 고객 Row를 클릭하면 해당 고객의 상세 구매 내역을 표시할 수 있는 기능을 구현하세요. 검색 결과에는 해당 고객의 구매 날짜, 구매한 제품 목록, 각 제품의 가격, 상품 썸네일이 포함되어야 합니다.

### 세부 구현 사항

- 데이터 제공 방식

  - 서버에서 제공되는 API 엔드포인트를 통해 데이터를 가져와야 합니다.
  - API 명세
    1. GET `/api/purchase-frequency` 한 달 동안의 모든 구매 데이터를 반환합니다.
       - 쿼리 파라미터 (optional)
         - from: 시작 날짜 (ISO 8601 형식)
         - to: 종료 날짜 (ISO 8601 형식)
    2. GET `/api/customers` 고객 목록을 반환합니다.
       - 쿼리 파라미터 (optional)
         - sortBy: 정렬 기준 (가능한 값: asc, desc - 구매 금액 순 정렬)
         - name: 이름 검색
    3. GET `/api/customers/{id}/purchases` 특정 고객의 구매 내역을 반환합니다.

- 프론트엔드 기술 스택
  - `apps/frontend` 폴더 안에 미리 React 프로젝트를 세팅해 두었습니다. 이것을 사용하여 애플리케이션을 개발하세요. 상태 관리, 차트 라이브러리, CSS 프레임워크는 기호에 맞게 사용하셔도 좋습니다.

### 기능 요구 사항

데이터는 클라이언트 사이드에서 비동기 요청을 통해 가져와야 합니다. 모든 데이터 요청 및 화면에 대한 로딩 상태와 에러 처리를 구현하세요. 단일 날짜도 조회할 수 있도록 구현해야 합니다.

### 추가 요구 사항

코드의 가독성을 위해 적절한 주석을 추가하세요. 필요한 경우, 유닛 테스트를 작성하여 주요 기능을 검증하세요.
